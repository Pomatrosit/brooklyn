<template>
  <footer>
    <div class="app-wrapper">

      <p class="footer__screen-description">
        <span class = "screen_desc" ref="screen2_desc">01 — О комплексе</span>
        <span class = "screen_desc" ref="screen3_desc">02 — Преимущества</span>
        <span class = "screen_desc" ref="screen4_desc">03 — Инфраструктура</span>
        <span class = "screen_desc" ref="screen5_desc">04 — Контакты</span>
      </p>

      <div class="footer__main">

        <span class="footer__text">ЖК Бруклин. Все права защищены©</span>

        <div class="footer__social">
          <a href="#">
            <svg width="26" height="30" viewBox="0 0 26 30" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M22.3685 3.33V12.72H20.4155V11.67C19.6628 12.45 18.91 12.84 18.1573 12.84C17.2418 12.84 16.784 12.28 16.784 11.16V3.33H18.7371V10.53C18.7371 10.95 18.91 11.16 19.2559 11.16C19.6017 11.16 19.9883 10.92 20.4155 10.44V3.33H22.3685ZM15.1362 5.52V10.38C15.1362 11.22 14.8818 11.86 14.3732 12.3C13.8646 12.74 13.1729 12.96 12.2981 12.96C11.464 12.96 10.7876 12.725 10.2688 12.255C9.75 11.785 9.49061 11.15 9.49061 10.35V5.49C9.49061 4.71 9.77034 4.115 10.3298 3.705C10.8893 3.295 11.5759 3.09 12.3897 3.09C13.1628 3.09 13.8138 3.31 14.3427 3.75C14.8717 4.19 15.1362 4.78 15.1362 5.52ZM13.1526 10.53V5.4C13.1526 5.2 13.061 5.035 12.8779 4.905C12.6948 4.775 12.5016 4.71 12.2981 4.71C12.0947 4.71 11.9116 4.775 11.7488 4.905C11.5861 5.035 11.5047 5.2 11.5047 5.4V10.53C11.5047 11.05 11.7692 11.31 12.2981 11.31C12.8678 11.31 13.1526 11.05 13.1526 10.53ZM7.35446 0H9.58216L7.90376 4.95C7.82238 5.19 7.72066 5.465 7.59859 5.775C7.47653 6.085 7.36972 6.365 7.27817 6.615C7.18662 6.865 7.11033 7.14 7.0493 7.44V12.72H4.85211V7.68C4.81142 7.44 4.51643 6.59 3.96714 5.13L2.2277 0H4.4554L5.85916 5.07H6.01174L7.35446 0ZM26 22.17C26 23.15 25.939 24.6 25.8169 26.52C25.7355 27.52 25.3439 28.315 24.642 28.905C23.9401 29.495 23.0806 29.81 22.0634 29.85C20.0493 29.95 17.0282 30 13 30C8.95149 30 5.93036 29.95 3.93662 29.85C2.91941 29.81 2.05986 29.495 1.35798 28.905C0.656103 28.315 0.264476 27.52 0.183099 26.52C0.0610329 24.6 0 23.15 0 22.17C0 21.19 0.0610329 19.74 0.183099 17.82C0.264476 16.82 0.656103 16.025 1.35798 15.435C2.05986 14.845 2.91941 14.53 3.93662 14.49C5.93036 14.39 8.95149 14.34 13 14.34C17.0485 14.34 20.0696 14.39 22.0634 14.49C23.0806 14.53 23.9401 14.845 24.642 15.435C25.3439 16.025 25.7355 16.82 25.8169 17.82C25.939 19.74 26 21.19 26 22.17ZM23.8333 24.9V24.33H22.216C22.216 24.37 22.221 24.5 22.2312 24.72C22.2414 24.94 22.2414 25.095 22.2312 25.185C22.221 25.275 22.1956 25.39 22.1549 25.53C22.1142 25.67 22.043 25.77 21.9413 25.83C21.8396 25.89 21.6972 25.92 21.5141 25.92C21.3106 25.92 21.153 25.86 21.0411 25.74C20.9292 25.62 20.8682 25.5 20.858 25.38C20.8478 25.26 20.8427 25.09 20.8427 24.87V23.43H23.8333V21.51C23.8333 20.81 23.6401 20.26 23.2535 19.86C22.867 19.46 22.3177 19.26 21.6056 19.26C20.9139 19.26 20.3392 19.465 19.8815 19.875C19.4237 20.285 19.1948 20.83 19.1948 21.51V24.9C19.1948 25.62 19.3932 26.195 19.7899 26.625C20.1866 27.055 20.7512 27.27 21.4836 27.27C23.0501 27.27 23.8333 26.48 23.8333 24.9ZM18.0047 25.47V21.27C18.0047 20.01 17.4961 19.38 16.4789 19.38C15.9703 19.38 15.5023 19.61 15.0751 20.07V16.77H13.4883V27.06H15.0751V26.46C15.5227 26.92 16.0211 27.15 16.5704 27.15C17.5266 27.15 18.0047 26.59 18.0047 25.47ZM10.3756 27.06H11.9319V19.47H10.3756V25.23C10.0297 25.61 9.7144 25.8 9.42958 25.8C9.1651 25.8 9.03286 25.63 9.03286 25.29V19.47H7.44601V25.86C7.44601 26.74 7.81221 27.18 8.5446 27.18C9.15493 27.18 9.76526 26.86 10.3756 26.22V27.06ZM5.61502 18.27H7.47653V16.77H2.01408V18.27H3.84507V27.06H5.61502V18.27ZM22.216 21.42V22.26H20.8427V21.42C20.8427 20.88 21.0767 20.61 21.5446 20.61C21.9922 20.61 22.216 20.88 22.216 21.42ZM16.3873 21.33V25.32C16.3873 25.74 16.2042 25.95 15.838 25.95C15.5532 25.95 15.2989 25.84 15.0751 25.62V20.88C15.2786 20.68 15.5023 20.58 15.7465 20.58C16.1737 20.58 16.3873 20.83 16.3873 21.33Z" fill="#242135"/>
            </svg>
          </a>
          <a href="#">
            <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M26.6667 0H3.33333C1.5 0 0 1.5 0 3.33333V26.6667C0 28.5017 1.5 30 3.33333 30H15V18.3333H11.6667V14.2083H15V10.7917C15 7.185 17.02 4.65167 21.2767 4.65167L24.2817 4.655V8.99667H22.2867C20.63 8.99667 20 10.24 20 11.3933V14.21H24.28L23.3333 18.3333H20V30H26.6667C28.5 30 30 28.5017 30 26.6667V3.33333C30 1.5 28.5 0 26.6667 0Z" fill="#242135"/>
            </svg>
          </a>
          <a href="#">
            <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M29.9034 8.85464C29.8866 7.59501 29.6504 6.34789 29.2054 5.16909C28.8194 4.17477 28.23 3.27176 27.4747 2.51774C26.7195 1.76372 25.8149 1.17527 24.819 0.789999C23.6534 0.353183 22.422 0.116989 21.1773 0.0914737C19.5746 0.019958 19.0665 0 14.9983 0C10.9301 0 10.4087 1.11523e-07 8.81775 0.0914737C7.57357 0.117176 6.34276 0.353368 5.1777 0.789999C4.18157 1.175 3.27691 1.76335 2.5216 2.51741C1.76629 3.27146 1.17696 4.17462 0.791315 5.16909C0.352895 6.33185 0.11682 7.56089 0.0932919 8.80308C0.021657 10.4047 0 10.912 0 14.9734C0 19.0348 -1.24121e-08 19.5537 0.0932919 21.1437C0.118281 22.3877 0.353176 23.6151 0.791315 24.781C1.17761 25.7752 1.76737 26.678 2.52294 27.4317C3.2785 28.1854 4.18325 28.7736 5.17937 29.1584C6.34124 29.6128 7.57226 29.8659 8.81942 29.9069C10.4237 29.9784 10.9318 30 15 30C19.0682 30 19.5896 30 21.1806 29.9069C22.4253 29.8824 23.6568 29.6467 24.8223 29.21C25.818 28.8243 26.7223 28.2357 27.4775 27.4817C28.2327 26.7278 28.8223 25.825 29.2087 24.8309C29.6468 23.6667 29.8817 22.4393 29.9067 21.1936C29.9783 19.5936 30 19.0864 30 15.0233C29.9967 10.9619 29.9967 10.4463 29.9034 8.85464ZM14.9883 22.6538C10.7336 22.6538 7.28676 19.2128 7.28676 14.9651C7.28676 10.7174 10.7336 7.27631 14.9883 7.27631C17.0309 7.27631 18.9899 8.08637 20.4342 9.5283C21.8785 10.9702 22.6899 12.9259 22.6899 14.9651C22.6899 17.0043 21.8785 18.9599 20.4342 20.4019C18.9899 21.8438 17.0309 22.6538 14.9883 22.6538ZM22.9964 8.78479C22.0019 8.78479 21.2006 7.98315 21.2006 6.99191C21.2006 6.75657 21.247 6.52354 21.3372 6.30612C21.4274 6.0887 21.5597 5.89114 21.7263 5.72474C21.893 5.55833 22.0909 5.42633 22.3087 5.33627C22.5265 5.24621 22.7599 5.19986 22.9956 5.19986C23.2313 5.19986 23.4648 5.24621 23.6825 5.33627C23.9003 5.42633 24.0982 5.55833 24.2649 5.72474C24.4316 5.89114 24.5638 6.0887 24.654 6.30612C24.7442 6.52354 24.7907 6.75657 24.7907 6.99191C24.7907 7.98315 23.9877 8.78479 22.9964 8.78479Z" fill="#242135"/>
            </svg>
          </a>
      </div>

      <div class="scroll-trigger"
        v-if="homeSlide < 5"
        :class="{red_trigger : homeSlide >= 3}"
        @click="onScrollTrigger"
      >
        <svg class="scroll-trigger__mouse" width="21" height="34" viewBox="0 0 21 34" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="1" y="1" width="19" height="32" rx="9.5" stroke="#EFEFEF" stroke-width="2"/>
          <circle r="2.5" transform="matrix(-1 0 0 1 10.5 11.5)" fill="#EFEFEF"/>
        </svg>
        <svg class="scroll-trigger__arrow" width="11" height="46" viewBox="0 0 11 46" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M5.75181 45.3775L5.68874 45.4363C5.68813 45.4367 5.68751 45.4372 5.6869 45.4376C5.67573 45.445 5.66776 45.4501 5.66118 45.4541L5.65477 45.4579L5.64887 45.4617L5.75181 45.3775ZM5.75181 45.3775L10.3729 40.4178L10.4304 40.3463C10.536 40.1816 10.5197 39.952 10.3939 39.8079L10.331 39.7501C10.2014 39.6564 10.0275 39.6677 9.9059 39.7982C9.90587 39.7982 9.90585 39.7983 9.90582 39.7983L6.72121 43.2177L5.85534 44.1475L5.85532 42.877L5.85456 0.92854L5.84891 0.83891C5.81559 0.622155 5.64964 0.5 5.50013 0.5C5.335 0.5 5.1457 0.65318 5.1457 0.9128L5.14646 42.8782L5.14648 44.1486L4.2806 43.219L1.10667 39.8117L1.04123 39.7511C0.911845 39.6566 0.7379 39.6673 0.615902 39.797C0.461944 39.9607 0.461205 40.2398 0.614686 40.4045L5.2477 45.377L5.31067 45.4353M5.75181 45.3775L5.31067 45.4353M5.31067 45.4353L5.3123 45.4364L5.32054 45.4421C5.32684 45.4464 5.33257 45.4502 5.3436 45.4574C5.34417 45.4578 5.34476 45.4582 5.34537 45.4586L5.31067 45.4353ZM5.64664 45.463C5.63491 45.4685 5.62756 45.4719 5.62123 45.4746L5.62118 45.4745L5.61058 45.4793C5.60949 45.4798 5.60683 45.4809 5.60206 45.4826C5.59953 45.4834 5.59736 45.484 5.59544 45.4846C5.58866 45.4865 5.58492 45.4876 5.57949 45.4891L5.57946 45.489L5.56852 45.4922C5.5673 45.4925 5.5647 45.4932 5.56025 45.4942C5.55614 45.4947 5.55321 45.4951 5.55079 45.4955C5.54612 45.4961 5.54336 45.4965 5.5376 45.4972L5.53758 45.4971L5.52557 45.4988C5.52432 45.499 5.52179 45.4993 5.51784 45.4996L5.51576 45.4996L5.45528 45.4962C5.45286 45.4959 5.45046 45.4955 5.44806 45.4951L5.44809 45.4949L5.43562 45.4931C5.43504 45.493 5.43241 45.4926 5.42741 45.4914C5.42431 45.4904 5.42176 45.4897 5.41954 45.489C5.41327 45.487 5.40971 45.4859 5.40416 45.4841L5.40421 45.4839L5.3914 45.4801C5.39095 45.4799 5.38901 45.4793 5.38511 45.4778C5.38492 45.4777 5.38473 45.4776 5.38455 45.4775C5.37302 45.4721 5.36711 45.4693 5.36064 45.466L5.35273 45.462L5.34594 45.4589C5.34516 45.4584 5.34283 45.4572 5.3387 45.4547L5.64664 45.463Z" fill="white" stroke="#EFEFEF"/>
        </svg>
      </div>

    </div>
  </div>
  </footer>
</template>

<script>
import gsap, { Power2 } from 'gsap'
import { mapGetters } from 'vuex'

export default {
  name: 'Footer',
  computed: mapGetters(['homeSlide']),
  data: () => ({
    isWheelAvailable: true
  }),
  watch: {
    homeSlide (homeSlide, prevHomeSlide) {
      switch (homeSlide) {
        case 2 : gsap.to(this.$refs.screen2_desc, { x: 0, opacity: 1, duration: 1, ease: Power2.easeInOut, delay: 1 })
          break
        case 3 : gsap.to(this.$refs.screen3_desc, { x: 0, opacity: 1, duration: 1, ease: Power2.easeInOut, delay: 1 })
          break
        case 4 : gsap.to(this.$refs.screen4_desc, { x: 0, opacity: 1, duration: 1, ease: Power2.easeInOut, delay: 1 })
          break
        case 5 : gsap.to(this.$refs.screen5_desc, { x: 0, opacity: 1, duration: 1, ease: Power2.easeInOut, delay: 1 })
          break
        default:
          break
      }
      switch (prevHomeSlide) {
        case 2 : gsap.to(this.$refs.screen2_desc, { x: -50, opacity: 0, duration: 1, ease: Power2.easeInOut })
          break
        case 3 : gsap.to(this.$refs.screen3_desc, { x: -50, opacity: 0, duration: 1, ease: Power2.easeInOut })
          break
        case 4 : gsap.to(this.$refs.screen4_desc, { x: -50, opacity: 0, duration: 1, ease: Power2.easeInOut })
          break
        case 5 : gsap.to(this.$refs.screen5_desc, { x: -50, opacity: 0, duration: 1, ease: Power2.easeInOut })
          break
        default:
          break
      }
    }
  },
  mounted () {
    gsap.to('.screen_desc', { x: -100, opacity: 0, duration: 0 })
  },
  methods: {
    setScrollUnavailable () {
      this.isWheelAvailable = false
      setTimeout(() => {
        this.isWheelAvailable = true
      }, 2000)
    },
    onScrollTrigger () {
      const homeSlide = this.$store.getters.homeSlide
      const lastHomeSlide = this.$store.getters.lastHomeSlide
      if (this.isWheelAvailable) {
        if (homeSlide < lastHomeSlide) {
          this.$store.commit('slideDown')
          this.setScrollUnavailable()
        }
      }
    }
  }
}
</script>

<style scoped>
footer{
  background:#fff;
  position:fixed;
  bottom:0;
  right:0;
  width:100%;
  z-index:1;
}

.app-wrapper{
  display:flex;
  align-items:center;
  justify-content:space-between;
}

.footer__main{
  height:13.54vh;
  display:flex;
  align-items:center;
}

.footer__text{
  font-weight: 500;
  font-size: 1.25vh;
  color: #000000;
  margin-right:1vh;
}

.footer__social a{
  margin-left:2.08vh;
}

.scroll-trigger{
  display:flex;
  flex-direction:column;
  align-items:center;
  position:fixed;
  right:3vh;
  bottom:23.958vh;
  cursor:pointer;
}

.scroll-trigger__mouse{
  margin-bottom:3.125vh;
}

.footer__screen-description{
  font-size: 2.08vh;
  color: #242135;
  position:relative;
  width:31vh;
  height:3.125vh;
}

.footer__screen-description span{
  position:absolute;
  top:0;
  left:0;
}

.red_trigger rect, .red_trigger path{
  stroke:#EA8E79;
}

.red_trigger circle{
  fill:#EA8E79;
}

.footer__social svg{
  width:3.125vh;
  height:3.125vh;
}

.scroll-trigger__mouse{
  width:1.98vh;
  height:3.33vh;
  transition:0.2s;
  transition-timing-function:ease-in-out;
}

.scroll-trigger__arrow{
  width:1.14vh;
  height:4.8vh;
  transition:0.2s;
  transition-timing-function:ease-in-out;
}

@media(hover:hover){
  .scroll-trigger:hover .scroll-trigger__arrow{
    transform:translateY(5px)
  }
  .scroll-trigger:hover .scroll-trigger__mouse{
    transform:translateY(-5px)
  }
}
</style>
